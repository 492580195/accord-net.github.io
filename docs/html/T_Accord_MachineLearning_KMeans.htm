<html xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp">
  <head>
    <link rel="SHORTCUT ICON" href="./../icons/favicon.ico" />
    <style type="text/css">.OH_CodeSnippetContainerTabLeftActive, .OH_CodeSnippetContainerTabLeft,.OH_CodeSnippetContainerTabLeftDisabled { backgroundImageName: tabLeftBG.gif; }.OH_CodeSnippetContainerTabRightActive, .OH_CodeSnippetContainerTabRight,.OH_CodeSnippetContainerTabRightDisabled { backgroundImageName: tabRightBG.gif; }.OH_footer { backgroundImageName: footer_slice.gif; background-position: top; background-repeat: repeat-x; }</style>
    <link rel="stylesheet" type="text/css" href="./../styles/branding.css" />
    <link rel="stylesheet" type="text/css" href="./../styles/branding-en-US.css" />
    <style type="text/css">
			body
			{
			border-left:5px solid #e6e6e6;
			overflow-x:scroll;
			overflow-y:scroll;
			}
		</style>
    <script src="./../scripts/branding.js" type="text/javascript">
      <!---->
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>KMeans Class</title>
    <meta name="Language" content="en-us" />
    <meta name="System.Keywords" content="KMeans class" />
    <meta name="System.Keywords" content="Accord.MachineLearning.KMeans class" />
    <meta name="System.Keywords" content="KMeans class, about KMeans class" />
    <meta name="Microsoft.Help.F1" content="Accord.MachineLearning.KMeans" />
    <meta name="Microsoft.Help.Id" content="T:Accord.MachineLearning.KMeans" />
    <meta name="Description" content="k-Means clustering algorithm." />
    <meta name="Microsoft.Help.ContentType" content="Reference" />
    <meta name="BrandingAware" content="'true'" />
    <meta name="container" content="Accord.MachineLearning" />
    <meta name="file" content="T_Accord_MachineLearning_KMeans" />
    <meta name="guid" content="T_Accord_MachineLearning_KMeans" />
    
    <link type="text/css" rel="stylesheet" href="ms-help://Hx/HxRuntime/HxLink.css" />
    <link type="text/css" rel="stylesheet" href="./../styles/highlight.css" />
    <script type="text/javascript" src="../scripts/highlight.js">
      <!---->
    </script>
    <meta name="SelfBranded" content="true" />
  </head>
  <body onload="onLoad()" class="primary-mtps-offline-document">
    <div class="OH_outerDiv">
      <div class="OH_outerContent">
        <table class="TitleTable">
          <tr>
            <td class="OH_tdLogoColumn">
              <img alt="Accord.NET (logo)" src="./../icons/logo.png" />
            </td>
            <td class="OH_tdTitleColumn">KMeans Class</td>
            <td class="OH_tdRunningTitleColumn">Accord.NET Framework</td>
          </tr>
        </table>
        <div id="mainSection">
          <div id="mainBody">
            <span class="introStyle">
              <img src="./../icons/online_icon.gif" class="OH_offlineIcon" alt="Online" title="Online" />
              <a href="http://accord-framework.net/docs/Index.html" target="_top">Show table of contents (goes to the online documentation index).</a>
              <br />
            </span>
            <div class="summary">
               k-Means clustering algorithm.
             </div>
            <div class="OH_CollapsibleAreaRegion">
              <div class="OH_regiontitle">Inheritance Hierarchy</div>
              <div class="OH_CollapsibleArea_HrDiv">
                <hr class="OH_CollapsibleArea_Hr" />
              </div>
            </div>
            <div class="OH_clear"></div>
            <img src="./../icons/online_icon.gif" class="OH_offlineIcon" alt="Online" title="Online" />
            <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">System<span id="ID0EBEOAAAAA"> </span><script type="text/javascript">
					addToLanSpecTextIdSet("ID0EBEOAAAAA?vb=.|cpp=::|cs=.|fs=.|nu=.");
				</script>Object</a>
            <br />  <span class="selflink">Accord.MachineLearning<span id="ID0EBBOAAAAA"> </span><script type="text/javascript">
					addToLanSpecTextIdSet("ID0EBBOAAAAA?vb=.|cpp=::|cs=.|fs=.|nu=.");
				</script>KMeans</span><br /><p></p><b>Namespace:</b> <a href="N_Accord_MachineLearning.htm" target="">Accord.MachineLearning</a><br /><b>Assembly:</b> <span sdata="assembly">Accord.MachineLearning</span> (in Accord.MachineLearning.dll) Version: 2.12.0.0 (2.12.0.4750)<div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Syntax</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"></div><div id="snippetGroup_Syntax" class="code"><div id="ID0EBAEAAAAA" class="OH_CodeSnippetContainer"><div class="OH_CodeSnippetContainerTabs" id="ID0EBAEAAAAA_tabs"><div class="OH_CodeSnippetContainerTabLeftActive" id="ID0EBAEAAAAA_tabimgleft"></div><div id="ID0EBAEAAAAA_tab1" class="OH_CodeSnippetContainerTabActive" EnableCopyCode="true"><a href="#" onclick="javascript:ChangeTab('ID0EBAEAAAAA','C#','1','4');return false;">C#</a></div><div id="ID0EBAEAAAAA_tab2" class="OH_CodeSnippetContainerTab" EnableCopyCode="true"><a href="#" onclick="javascript:ChangeTab('ID0EBAEAAAAA','Visual Basic','2','4');return false;">VB</a></div><div id="ID0EBAEAAAAA_tab3" class="OH_CodeSnippetContainerTabDisabledNotFirst" EnableCopyCode="true" disabled="true"><a>C++</a></div><div id="ID0EBAEAAAAA_tab4" class="OH_CodeSnippetContainerTabDisabledNotFirst" EnableCopyCode="true" disabled="true"><a>F#</a></div><div class="OH_CodeSnippetContainerTabRight" id="ID0EBAEAAAAA_tabimgright"></div></div><div id="ID0EBAEAAAAA_codecollection" class="OH_CodeSnippetContainerCodeCollection"><div class="OH_CodeSnippetToolBar"><div class="OH_CodeSnippetToolBarText"><a id="ID0EBAEAAAAA_ViewColorized" href="#" onclick="javascript:ExchangeTitleContent('ID0EBAEAAAAA','4')" title="View Colorized" style="display: none">View Colorized</a><a id="ID0EBAEAAAAA_copycode" href="#" onclick="javascript:CopyToClipboard('ID0EBAEAAAAA','4')" title="Copy to Clipboard">Copy to Clipboard</a><a id="ID0EBAEAAAAA_PrintText" class="OH_PrintText" href="#" onclick="javascript:Print('ID0EBAEAAAAA','4')" title="Print">Print</a></div></div><div id="ID0EBAEAAAAA_code_Div1" class="OH_CodeSnippetContainerCode" style="display: block"><pre>[<span class="identifier">SerializableAttribute</span>]
<span class="keyword">public</span> <span class="keyword">class</span> <span class="identifier">KMeans</span> : <span class="identifier">IClusteringAlgorithm</span>&lt;<span class="identifier">double</span>[]&gt;</pre></div><div id="ID0EBAEAAAAA_code_Plain_Div1" class="OH_CodeSnippetContainerCode" style="display: none"><pre>[SerializableAttribute]
public class KMeans : IClusteringAlgorithm&lt;double[]&gt;</pre></div><div id="ID0EBAEAAAAA_code_Div2" class="OH_CodeSnippetContainerCode" style="display: none"><pre>&lt;<span class="identifier">SerializableAttribute</span>&gt;
<span class="keyword">Public</span> <span class="keyword">Class</span> <span class="identifier">KMeans</span> 
	<span class="keyword">Implements</span> <span class="identifier">IClusteringAlgorithm</span>(<span class="keyword">Of</span> <span class="identifier">Double</span>())</pre></div><div id="ID0EBAEAAAAA_code_Plain_Div2" class="OH_CodeSnippetContainerCode" style="display: none"><pre>&lt;SerializableAttribute&gt;
Public Class KMeans 
	Implements IClusteringAlgorithm(Of Double())</pre></div><div id="ID0EBAEAAAAA_code_Div3" class="OH_CodeSnippetContainerCode" style="display: none"><pre /></div><div id="ID0EBAEAAAAA_code_Plain_Div3" class="OH_CodeSnippetContainerCode" style="display: none"><pre /></div><div id="ID0EBAEAAAAA_code_Div4" class="OH_CodeSnippetContainerCode" style="display: none"><pre /></div><div id="ID0EBAEAAAAA_code_Plain_Div4" class="OH_CodeSnippetContainerCode" style="display: none"><pre /></div></div></div><script>addSpecificTextLanguageTagSet('ID0EBAEAAAAA');</script></div><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Remarks</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"></div><p>
               In statistics and machine learning, k-means clustering is a method
               of cluster analysis which aims to partition n observations into k 
               clusters in which each observation belongs to the cluster with the
               nearest mean.</p><p>
               It is similar to the expectation-maximization algorithm for mixtures
               of Gaussians in that they both attempt to find the centers of natural
               clusters in the data as well as in the iterative refinement approach
               employed by both algorithms.</p><p>
               The algorithm is composed of the following steps:
               <ol><li>
                     Place K points into the space represented by the objects that are
                     being clustered. These points represent initial group centroids.
                 </li><li>
                     Assign each object to the group that has the closest centroid.
                 </li><li>
                     When all objects have been assigned, recalculate the positions
                     of the K centroids.
                 </li><li>
                     Repeat Steps 2 and 3 until the centroids no longer move. This
                     produces a separation of the objects into groups from which the
                     metric to be minimized can be calculated.
                 </li></ol></p><p>
               This particular implementation uses the squared Euclidean distance
               as a similarity measure in order to form clusters. </p><p>
               References:
               <ul><li>
                   Wikipedia, The Free Encyclopedia. K-means clustering. Available on:
                   http://en.wikipedia.org/wiki/K-means_clustering </li><li>
                   Matteo Matteucci. A Tutorial on Clustering Algorithms. Available on:
                   http://home.dei.polimi.it/matteucc/Clustering/tutorial_html/kmeans.html </li></ul></p><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Examples</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"></div>
               How to perform clustering with K-Means.
               <div id="ID0EGCAAAAA" class="OH_CodeSnippetContainer"><div class="OH_CodeSnippetContainerTabs" id="ID0EGCAAAAA_tabs"></div><div id="ID0EGCAAAAA_codecollection" class="OH_CodeSnippetContainerCodeCollection"><div class="OH_CodeSnippetToolBar"><div class="OH_CodeSnippetToolBarText"><a id="ID0EGCAAAAA_ViewColorized" href="#" onclick="javascript:ExchangeTitleContent('ID0EGCAAAAA','4')" title="View Colorized" style="display: none">View Colorized</a><a id="ID0EGCAAAAA_copycode" href="#" onclick="javascript:CopyToClipboard('ID0EGCAAAAA','4')" title="Copy to Clipboard">Copy to Clipboard</a><a id="ID0EGCAAAAA_PrintText" class="OH_PrintText" href="#" onclick="javascript:Print('ID0EGCAAAAA','4')" title="Print">Print</a></div></div><div id="ID0EGCAAAAA_code_Div1" class="OH_CodeSnippetContainerCode" style="display: block"><pre><span class="highlight-comment">// Declare some observations</span> 
<span class="highlight-keyword">double</span>[][] observations = 
{
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] { <span class="highlight-number">-5</span>, <span class="highlight-number">-2</span>, <span class="highlight-number">-1</span> },
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] { <span class="highlight-number">-5</span>, <span class="highlight-number">-5</span>, <span class="highlight-number">-6</span> },
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] {  <span class="highlight-number">2</span>,  <span class="highlight-number">1</span>,  <span class="highlight-number">1</span> },
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] {  <span class="highlight-number">1</span>,  <span class="highlight-number">1</span>,  <span class="highlight-number">2</span> },
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] {  <span class="highlight-number">1</span>,  <span class="highlight-number">2</span>,  <span class="highlight-number">2</span> },
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] {  <span class="highlight-number">3</span>,  <span class="highlight-number">1</span>,  <span class="highlight-number">2</span> },
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] { <span class="highlight-number">11</span>,  <span class="highlight-number">5</span>,  <span class="highlight-number">4</span> },
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] { <span class="highlight-number">15</span>,  <span class="highlight-number">5</span>,  <span class="highlight-number">6</span> },
    <span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] { <span class="highlight-number">10</span>,  <span class="highlight-number">5</span>,  <span class="highlight-number">6</span> },
};

<span class="highlight-comment">// Create a new K-Means algorithm with 3 clusters </span>
KMeans kmeans = <span class="highlight-keyword">new</span> KMeans(<span class="highlight-number">3</span>);

<span class="highlight-comment">// Compute the algorithm, retrieving an integer array</span> 
<span class="highlight-comment">//  containing the labels for each of the observations</span> 
<span class="highlight-keyword">int</span>[] labels = kmeans.Compute(observations);

<span class="highlight-comment">// As result, the first two observations should belong to the</span> 
<span class="highlight-comment">// same cluster (thus having the same label). The same should</span> 
<span class="highlight-comment">// happen to the next four observations and to the last three.</span> 

<span class="highlight-comment">// In order to classify new, unobserved instances, you can</span> 
<span class="highlight-comment">// use the kmeans.Clusters.Nearest method, as shown below:</span> 
<span class="highlight-keyword">int</span> c = kmeans.Clusters.Nearest(<span class="highlight-keyword">new</span> <span class="highlight-keyword">double</span>[] { <span class="highlight-number">4</span>, <span class="highlight-number">1</span>, <span class="highlight-number">9</span>) });</pre></div><div id="ID0EGCAAAAA_code_Plain_Div1" class="OH_CodeSnippetContainerCode" style="display: none"><pre>// Declare some observations 
double[][] observations = 
{
    new double[] { -5, -2, -1 },
    new double[] { -5, -5, -6 },
    new double[] {  2,  1,  1 },
    new double[] {  1,  1,  2 },
    new double[] {  1,  2,  2 },
    new double[] {  3,  1,  2 },
    new double[] { 11,  5,  4 },
    new double[] { 15,  5,  6 },
    new double[] { 10,  5,  6 },
};

// Create a new K-Means algorithm with 3 clusters 
KMeans kmeans = new KMeans(3);

// Compute the algorithm, retrieving an integer array 
//  containing the labels for each of the observations 
int[] labels = kmeans.Compute(observations);

// As result, the first two observations should belong to the 
// same cluster (thus having the same label). The same should 
// happen to the next four observations and to the last three. 

// In order to classify new, unobserved instances, you can 
// use the kmeans.Clusters.Nearest method, as shown below: 
int c = kmeans.Clusters.Nearest(new double[] { 4, 1, 9) });</pre></div></div></div><script>addSpecificTextLanguageTagSet('ID0EGCAAAAA');</script><p>
               The following example demonstrates how to use the Mean Shift algorithm
               for color clustering. It is the same code which can be found in the
               <a href="" target="">color clustering sample application</a>.</p><div id="ID0EECAAAAA" class="OH_CodeSnippetContainer"><div class="OH_CodeSnippetContainerTabs" id="ID0EECAAAAA_tabs"></div><div id="ID0EECAAAAA_codecollection" class="OH_CodeSnippetContainerCodeCollection"><div class="OH_CodeSnippetToolBar"><div class="OH_CodeSnippetToolBarText"><a id="ID0EECAAAAA_ViewColorized" href="#" onclick="javascript:ExchangeTitleContent('ID0EECAAAAA','4')" title="View Colorized" style="display: none">View Colorized</a><a id="ID0EECAAAAA_copycode" href="#" onclick="javascript:CopyToClipboard('ID0EECAAAAA','4')" title="Copy to Clipboard">Copy to Clipboard</a><a id="ID0EECAAAAA_PrintText" class="OH_PrintText" href="#" onclick="javascript:Print('ID0EECAAAAA','4')" title="Print">Print</a></div></div><div id="ID0EECAAAAA_code_Div1" class="OH_CodeSnippetContainerCode" style="display: block"><pre><span class="highlight-keyword">int</span> k = <span class="highlight-number">5</span>; 

<span class="highlight-comment">// Load a test image (shown below)</span>
Bitmap image = ...

<span class="highlight-comment">// Create converters</span>
ImageToArray imageToArray = <span class="highlight-keyword">new</span> ImageToArray(min: <span class="highlight-number">-1</span>, max: <span class="highlight-number">+1</span>);
ArrayToImage arrayToImage = <span class="highlight-keyword">new</span> ArrayToImage(image.Width, image.Height, min: <span class="highlight-number">-1</span>, max: <span class="highlight-number">+1</span>);

<span class="highlight-comment">// Transform the image into an array of pixel values</span> 
<span class="highlight-keyword">double</span>[][] pixels; imageToArray.Convert(image, <span class="highlight-keyword">out</span> pixels);


<span class="highlight-comment">// Create a K-Means algorithm using given k and a</span> 
<span class="highlight-comment">//  square Euclidean distance as distance metric.</span>
KMeans kmeans = <span class="highlight-keyword">new</span> KMeans(k, Distance.SquareEuclidean);

<span class="highlight-comment">// Compute the K-Means algorithm until the difference in</span> 
<span class="highlight-comment">//  cluster centroids between two iterations is below 0.05</span> 
<span class="highlight-keyword">int</span>[] idx = kmeans.Compute(pixels, <span class="highlight-number">0.05</span>);


<span class="highlight-comment">// Replace every pixel with its corresponding centroid</span>
pixels.ApplyInPlace((x, i) =&gt; kmeans.Clusters.Centroids[idx[i]]);

<span class="highlight-comment">// Retrieve the resulting image in a picture box</span>
Bitmap result; arrayToImage.Convert(pixels, <span class="highlight-keyword">out</span> result);</pre></div><div id="ID0EECAAAAA_code_Plain_Div1" class="OH_CodeSnippetContainerCode" style="display: none"><pre>int k = 5; 

// Load a test image (shown below)
Bitmap image = ...

// Create converters
ImageToArray imageToArray = new ImageToArray(min: -1, max: +1);
ArrayToImage arrayToImage = new ArrayToImage(image.Width, image.Height, min: -1, max: +1);

// Transform the image into an array of pixel values 
double[][] pixels; imageToArray.Convert(image, out pixels);


// Create a K-Means algorithm using given k and a 
//  square Euclidean distance as distance metric.
KMeans kmeans = new KMeans(k, Distance.SquareEuclidean);

// Compute the K-Means algorithm until the difference in 
//  cluster centroids between two iterations is below 0.05 
int[] idx = kmeans.Compute(pixels, 0.05);


// Replace every pixel with its corresponding centroid
pixels.ApplyInPlace((x, i) =&gt; kmeans.Clusters.Centroids[idx[i]]);

// Retrieve the resulting image in a picture box
Bitmap result; arrayToImage.Convert(pixels, out result);</pre></div></div></div><script>addSpecificTextLanguageTagSet('ID0EECAAAAA');</script><p>
               The original image is shown below:</p><img src="./../images/kmeans-start.png" /><p>
               The resulting image will be:</p><img src="./../images/kmeans-end.png" /><a name="seeAlsoSection"><!----></a><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">See Also</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"></div><div class="seeAlsoStyle"><a href="AllMembers_T_Accord_MachineLearning_KMeans.htm" target="">KMeans Members</a></div><div class="seeAlsoStyle"><a href="N_Accord_MachineLearning.htm" target="">Accord.MachineLearning Namespace</a></div><div class="seeAlsoStyle"><a href="T_Accord_MachineLearning_KModes_1.htm" target="">Accord.MachineLearning<span id="ID0EEACAAAAAA"> </span><script type="text/javascript">
					addToLanSpecTextIdSet("ID0EEACAAAAAA?vb=.|cpp=::|cs=.|fs=.|nu=.");
				</script>KModes<span id="ID0ECACAAAAAA"> </span><script type="text/javascript">
					addToLanSpecTextIdSet("ID0ECACAAAAAA?vb=(Of |cpp=&lt;|cs=&lt;|fs=&lt;'|nu=(");
				</script>TData<span id="ID0EAACAAAAAA"> </span><script type="text/javascript">
					addToLanSpecTextIdSet("ID0EAACAAAAAA?vb=)|cpp=&gt;|cs=&gt;|fs=&gt;|nu=)");
				</script></a></div><div class="seeAlsoStyle"><a href="T_Accord_MachineLearning_MeanShift.htm" target="">Accord.MachineLearning<span id="ID0EBABAAAAAA"> </span><script type="text/javascript">
					addToLanSpecTextIdSet("ID0EBABAAAAAA?vb=.|cpp=::|cs=.|fs=.|nu=.");
				</script>MeanShift</a></div><div class="seeAlsoStyle"><a href="T_Accord_MachineLearning_GaussianMixtureModel.htm" target="">Accord.MachineLearning<span id="ID0EBAAAAAAAA"> </span><script type="text/javascript">
					addToLanSpecTextIdSet("ID0EBAAAAAAAA?vb=.|cpp=::|cs=.|fs=.|nu=.");
				</script>GaussianMixtureModel</a></div></div>
        </div>
      </div>
    </div>
    <div id="OH_footer" class="OH_footer">
      <p>
        <a href="http://accord-framework.net/" target="_blank">Accord.NET Framework</a> © 2009-2014. All documentation is licensed under the Creative Commons Attribution/Share-Alike License.</p>
      <div class="OH_feedbacklink">
        <a href="mailto:feedback@accord-framework.net?subject=Accord.NET+Framework+KMeans+Class+100+EN-US&amp;body=Your%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report%2c%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed%2c%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.">Send Feedback</a> on this topic to feedback@accord-framework.net.</div>
    </div>
  </body>
</html>